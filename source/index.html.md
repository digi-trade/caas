---
title: API Reference

language_tabs: # must be one of https://git.io/vQNgJ
  - shell

toc_footers:
  - <a href='mail:support@cabital.com'>申请使用</a>
  - <a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a>

includes:
  - errors

search: true

code_clipboard: true
---

# 简介

欢迎使用Cabital API，Cabital API 使开发人员能够将cabital专业、安全、可靠的筛查服务集成到现有工作流中，以帮助简化KYC的流程。

API 功能简介：
- 提供个人用户或企业用户的名单筛查能力
- 根据合作伙伴的合规策略，进行筛查结果排查，提供建议
- 从行业领先的数据库持续检索筛查存量客户的能力

您可以根据本文档提供的API来使用服务，支持的全部API请参见KYC Case

# API 认证

API key is recommend if you only need to access your own account. All API key requests must be signed and contain the following headers:

- ACCESS-KEY The api key as a string
- ACCESS-SIGN The user generated message signature (see below)
- ACCESS-TIMESTAMP A timestamp for your request
All request bodies should have content type application/json and be valid JSON.

The ACCESS-SIGN header is generated by creating a sha256 HMAC using the secret key on the prehash string timestamp + method + requestPath + body (where + represents string concatenation). The timestamp value is the same as the ACCESS-TIMESTAMP header.

The body is the request body string or omitted if there is no request body (typically for GET requests).

The method should be UPPER CASE.

The ACCESS-TIMESTAMP header MUST be number of seconds since Unix Epoch.

Your timestamp must be within 30 seconds of the api service time or your request will be considered expired and rejected. We recommend using the time endpoint to query for the API server time if you believe there many be time skew between your server and the API servers.

Read more about API keys.

<aside class="warning">You should never request API keys or secrets from other users.</aside>


# KYC Case

## 资源描述

### KYC Create Case

> Sample

```json
{
    "externalCaseId": "243d19cf-562f-4060-89fa-1d35a7723c3e",
    "screenType": "INDIVIDUAL",
    "fullName": "John Doe",
    "individualInfo": {
        "gender": "MALE",
        "dob": "2002-02-02",
        "nationality": "JPN",
        "residentialCountry": "HKG"
    },
    "organizationInfo": {
        "registeredCountry": "HKG"
    }
}
```

客户创建KYC Case，包含有用户个人或业务实体的基本信息。

字段 | 类型 | 必须       | 描述
--------- | ------- | ---------------| -----------
externalCaseId | string | true| 客户自己可以选择的外部Id，字符长度最大36位Unicode
screenType | string(ENUM) | true| Case的扫描类型，为枚举字符串，选择为`INDIVIDUAL, ORGANISATION`
fullName | string | true| 扫描对象的全称，个体名字或者实体名字,字符长度最大250位Unicode
individualInfo | object | false| 用户个体的信息, 二选一
organizationInfo | object | false| 业务实体的信息, 二选一


### KYC Get Case

> Sample

```json
{
    "externalCaseId": "243d19cf-562f-4060-89fa-1d35a7723c3e",
    "screenType": "INDIVIDUAL", // INDIVIDUAL, ORGANISATION
    "fullName": "John Doe",
    "individualInfo": {
        "gender": "MALE",
        "dob": "2002-02-02",
        "nationality": "JPN",
        "residentialCountry": "HKG"
    },
    "organizationInfo": {
        "registeredCountry": "HKG"
    },
    "suggestion": "SUGGEST_TO_ACCEPT",
    "suggestionComment": "resolve by operator",
    "decision": "ACCEPT",
    "decisionComment": "default comment",
    "status": "COMPLETE"
}
```

客户查询KYC Case，包含case的处理意见。

字段 | 类型 | 描述
--------- | ------- | ---------------| -----------
externalCaseId | string | 客户自己可以选择的外部Id，字符长度最大36位Unicode
screenType | string(ENUM) | Case的扫描类型，为枚举字符串，选择为`INDIVIDUAL, ORGANISATION`
fullName | string | 扫描对象的全称，个体名字或者实体名字
individualInfo | object | 用户个体的信息, 二选一
organizationInfo | object | 业务实体的信息, 二选一
suggestion | string(ENUM) | 系统建议 `SUGGEST_TO_ACCEPT,SUGGEST_TO_REJECT,NO_SUGGESTION`
suggestionComment | string | 系统建议的人工备注
decision | string(ENUM) | 客户决定 `REJECT, ACCEPT`
decisionComment | string | 客户决定的人工备注
status | string(ENUM) | case状态 `NEW,PENDING,WAITING_APPROVAL,COMPLETE`
ogs | bool | 持续性扫描状态



### IndividualInfo

客户创建客户的个人用户基本信息。

字段 | 类型 | 必须 | 描述
--------- | --------- | ------- | -----------
gender | string | false| 性别，为枚举字符串，选择为`MALE, FEMALE`
dob | string | false| Date of Birth 生日， yyyy-MM-dd
nationality | string (alpha-3) | false| 用户的国籍 (ISO-3166-1 alpha-3)
residentialCountry | string (alpha-3) | false| 用户的居住国家 (ISO-3166-1 alpha-3)


### OrganizationInfo

客户创建客户的企业用户基本信息。

字段 | 类型 | 必须 | 描述
--------- | --------- | ------- | -----------
registeredCountry | string (alpha-3) | false | 企业注册国家 (ISO-3166-1 alpha-3)



## 创建 KYC Case

```shell
curl "http://caas.cabital.com/api/v1/cases" \
  -H "ACCESS-KEY: YOUR_KEY" \
  -H "ACCESS-SIGN: SIGN_KEY" \
  -H "ACCESS-TIMESTAMP: 1623828308" \
  -X POST
```

> HTTP返回 (201)

> The above command returns JSON structured like this:

```json
{
  "caseSystemId": "243d19cf-562f-4060-89fa-1d35a7723c3e", // UUID
  "status": "NEW"
}
```

创建 KYC Case

### HTTP Request

`POST https://caas.cabital.com/api/v1/cases`

<aside class="success">
客户在打开<i> Zero Footprint</i> 的配置下，创建 KYC Case 将自动触发一次性扫描!
</aside>

## 获取特定的 KYC Case


```shell
curl "http://caas.cabital.com/api/v1/cases/2" \
  -H "ACCESS-KEY: YOUR_KEY" \
  -H "ACCESS-SIGN: SIGN_KEY" \
  -H "ACCESS-TIMESTAMP: 1623828308"
```


> The above command returns JSON structured like this:

```json
{
    "externalCaseId": "243d19cf-562f-4060-89fa-1d35a7723c3e",
    "screenType": "INDIVIDUAL", // INDIVIDUAL, ORGANISATION
    "fullName": "John Doe",
    "individualInfo": {
        "gender": "MALE",
        "dob": "2002-02-02",
        "nationality": "JPN",
        "residentialCountry": "HKG"
    },
    "organizationInfo": {
        "registeredCountry": "HKG"
    },
    "suggestion": "SUGGEST_TO_ACCEPT",
    "suggestionComment": "resolve by operator",
    "decision": "ACCEPT",
    "decisionComment": "default comment",
    "status": "COMPLETE"
}
```


### HTTP Request

`GET http://caas.cabital.com/api/v1/cases/{caseSystemId}`

### URL Parameters

参数 | 描述
--------- | -----------
caseSystemId | KYC Case system UUID

## 打开特定 KYC Case 的持续性扫描


```shell
curl "https://caas.cabital.com/api/v1/cases/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/ogs" \
  -X POST \
  -H "ACCESS-KEY: YOUR_KEY" \
  -H "ACCESS-SIGN: SIGN_KEY" \
  -H "ACCESS-TIMESTAMP: 1623828308" 
```

> HTTP返回 (201)

针对特定KYC Case打开持续扫描

### HTTP Request

`POST https://caas.cabital.com/api/v1/cases/{caseSystemId}/ogs`

### URL Parameters

参数 | 描述
--------- | -----------
caseSystemId | KYC Case system UUID


## 关闭特定 KYC Case 的持续性扫描


```shell
curl "https://caas.cabital.com/api/v1/cases/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/ogs" \
  -X DELETE \
  -H "Authorization: meowmeowmeow"
```

> HTTP返回 (204)

针对特定KYC Case关闭持续扫描

### HTTP Request

`DELETE https://caas.cabital.com/api/v1/cases/{caseSystemId}/ogs`

### URL Parameters

参数 | 描述
--------- | -----------
caseSystemId | KYC Case system UUID


## 提供特定 KYC Case 的最终决定


```shell
curl "https://caas.cabital.com/api/v1/cases/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/decision" \
  -X POST \
  -H "Authorization: meowmeowmeow"
```

> HTTP返回 (201)

针对特定KYC Case提供最终KYC决定，caseResult为枚举型String：

- ACCEPT
- REJECT

### HTTP Request

`POST https://caas.cabital.com/api/v1/cases/{caseSystemId}/decision`

> Request Body

```json
{
  "decision" : "ACCEPT",
  "comment" : "决策备注"
}
```
### URL Parameters

参数 | 描述
--------- | -----------
caseSystemId | KYC Case system UUID

# Webhook

webhook 预计平均会在 3-5 分钟后到达，但理论上可能需要长达 24 小时。如果由于某种原因您错过了 webhook，请不要担心：我们会记录尝试发送的所有内容，并且可以随时重新发送失败的 webhook。如果 webhook 请求失败，我们会尝试重新发送四次：5 分钟、1 小时、5 小时和 18 小时后，直到请求成功获得 2XX 返回码的。

我们建议您等待 webhook 不超过一天，然后向我们的服务器发送请求以获取有关资源的状态信息。

## Webhooks types

类型 | 描述
--------- | -----------
CaseCreated | case成功创建后通知,`Zero Footprint` model not send
CasePending | case成功扫描后通知
CaseReviewed | case产生扫描建议后通知

## KYC Case 扫描回调示例
### Webhook payload attributes

字段 | 类型 | 必须 | 描述
--------- | ------- | ------------|-----------
externalCaseId | string | true | 客户填写的外部Id
caseSystemId | string | true | Case的system uuid
suggestion | string(ENUM) | false | 系统建议 `SUGGEST_TO_ACCEPT,SUGGEST_TO_REJECT,NO_SUGGESTION`
comment | string | false| 系统建议的人工备注

> HTTP Payload
 
```json
{
    "caseSystemId": "6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c",
    "externalCaseId": "243d19cf-562f-4060-89fa-1d35a7723c3e",
    "suggestion": "SUGGEST_TO_REJECT",
    "comment": "User is okay to me."
}
```
case的状态发生变化时，我们将向您发送带有 JSON 负载的 POST 请求到集成时提供给我们的 URL。